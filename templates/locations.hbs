---
{
"stream": {
"$id": "detailed-locations",
"source": "knowledgeGraph",
"destination": "pages",
"filter" : {
"entityTypes": [
"location"
],
"savedFilterIds":[
"910935477"
]
},
"fields": [
"id",
"uid",
"meta",
"name",
"address",
"slug",
"mainPhone",
"description",
"hours",
"photoGallery",
"c_relatedFAQs.question",
"c_relatedFAQs.slug",
"c_relatedFAQs.answer",
"geocodedCoordinate",
"c_paymentMenthod",
"yextDisplayCoordinate",
"services"
],
"localization": {
"locales": ["en"]
}
},
"urlFormat": "{{slug}}"
}
---


<!DOCTYPE html>
<html lang="en">

<head>
  {{>head }}
  <title>{{name}} - {{neighborhood}}</title>
  {{>schema}}
  <link rel="shortcut icon" type="image/jpg" href="/images/yext-favicon.png" />
  <script src="https://maps.googleapis.com/maps/api/js?callback=myMap" async></script>
  <script src="https://unpkg.com/flowbite@1.4.1/dist/flowbite.js"></script>
</head>

<body>
  <div class="w-full">
    {{>pep_nav}}
    {{>banner}}

    <div class="centered-container">
      <div class="flex flex-wrap md:flex-row-reverse">
        <div class="w-full md:w-2/6 px-4 text-sm">
          <div class="map_here address-block">
            <a href="#!" data-mdb-ripple="true" data-mdb-ripple-color="light">
              <!-- <img class="rounded-t-lg" src="{{photoGallery.[0].image.url}}" alt="Location Image here"/> -->
              <div class="map-block" id="map_canvas">
                {{>staticmap geocodedCoordinate}}
              </div>
            </a>
            <div class="">
              {{>locationdetails address}}
              <a href="tel:{{mainPhone}}" class="btn">Call Now</a>
              <a class="btn"
                href="https://www.google.com/maps/dir/?api=1&destination={{address.line1}} {{address.city}} {{address.region}} {{address.postalCode}}">Get
                Direction</a>
              <button type="button" class="btn">Order Now</button>
            </div>
          </div>
        </div>
        <div class="w-full md:w-4/6 store-content px-4 text-sm">
          <h2 class="sec-heading pt-24">{{name}}</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
            dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex
            ea commodo consequat.</p>
          <div class="flex flex-col md:flex-row mt-5 -mx-4">
            <div class="w-full md:w-1/2 px-4 mb-3 md:mb-0">
              <h4 class="font-bold text-xl mb-3">Services Offered</h4>
              {{#if services}}
              <ul class="list-disc pl-5">
                {{#each services}}
                <li class="">{{this}}</li>
                {{/each}}
              </ul>
              {{/if}}
            </div>
            <div class="w-full md:w-1/2 px-4">
              <h4 class="font-bold text-xl mb-3">Payment Methods</h4>
              {{#if c_paymentMenthod}}
              <ul class="list-disc pl-5">
                {{#each c_paymentMenthod}}
                <li class="">{{this}}</li>
                {{/each}}
              </ul>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="centered-container">
      <h2 class="sec-heading text-center">Shop Cellphones</h2>
      <div id="default-carousel" class="relative" data-carousel="static">
        <!-- Carousel wrapper -->
        <div class="overflow-hidden relative">
          <!-- Item 1 -->
          <div class="slide-c hidden duration-700 ease-in-out" data-carousel-item>
            <div class="h-0 pb-[44%] w-full inline-block align-middle overflow-hidden relative">
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Image_created_with_a_mobile_phone.png/1200px-Image_created_with_a_mobile_phone.png"
                class="block absolute top-0 left-0 w-full h-full object-cover object-center" alt="...">
            </div>
            <div class="slide-content relative z-0 flex flex-row items-center mt-2">
              <div class="w-4/6">
                <h5>Shop Stylo Cellphones</h5>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                  et dolore magna aliqua. Ut enim ad minim veniam.</p>
              </div>
              <div class="w-2/6 text-right">
                <a href="#" class="btn">Apply Now</a>
              </div>
            </div>
          </div>
          <!-- Item 2 -->
          <div class="slide-c hidden duration-700 ease-in-out" data-carousel-item>
            <div class="h-0 pb-[44%] w-full inline-block align-middle overflow-hidden relative">
              <img src="images/slide.webp" class="block absolute top-0 left-0 w-full h-full object-cover object-center"
                alt="...">
            </div>
            <div class="slide-content relative z-0 flex flex-col md:flex-row items-center mt-2">
              <div class="md:w-4/6">
                <h5>Shop Stylo Cellphones 2</h5>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore
                  et dolore magna aliqua. Ut enim ad minim veniam.</p>
              </div>
              <div class="md:w-2/6 text-right">
                <a href="#" class="btn">Apply Now</a>
              </div>
            </div>
          </div>
          <!-- Item 3 -->

        </div>
        <!-- Slider indicators -->
        <div class="flex justify-center z-30 slider-dots my-2">
          <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 1"
            data-carousel-slide-to="0"></button>
          <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 2"
            data-carousel-slide-to="1"></button>
          {{!-- <button type="button" class="w-3 h-3 rounded-full" aria-current="false" aria-label="Slide 3"
            data-carousel-slide-to="2"></button> --}}
        </div>
        <!-- Slider controls -->
        <button type="button"
          class="hidden md:flex absolute top-0 left-1 z-30 justify-center items-center -ml-14 h-full cursor-pointer group focus:outline-none"
          data-carousel-prev>
          <span
            class="inline-flex justify-center items-center w-8 h-8 sm:w-10 sm:h-10 bg-blue-600 group-focus:outline-none">
            <svg class="w-5 h-5 text-white sm:w-6 sm:h-6 dark:text-gray-800" fill="none" stroke="currentColor"
              viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            <span class="hidden">Previous</span>
          </span>
        </button>
        <button type="button"
          class="hidden md:flex absolute top-0 right-1 z-30 justify-center items-center -mr-14 h-full cursor-pointer group focus:outline-none"
          data-carousel-next>
          <span
            class="inline-flex justify-center items-center w-8 h-8 sm:w-10 sm:h-10 bg-blue-600 group-focus:outline-none">
            <svg class="w-5 h-5 text-white sm:w-6 sm:h-6 dark:text-gray-800" fill="none" stroke="currentColor"
              viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
            <span class="hidden">Next</span>
          </span>
        </button>
      </div>
    </div>

    <h2 class="sec-heading text-center">Service Provider Promotions</h2>
    <div class="shop-sec">
      <div class="centered-container">
        <div class="flex flex-wrap">
          <div class="w-full md:w-2/4 lg:w-1/4 px-3 mb-5">
            <div class="promo-img">
              <img src="images/slide.webp" class="block absolute top-0 left-0 w-full h-full object-cover object-center"
                alt="...">
            </div>
            <div class="prmo-content">
              <h4>Vodacom</h4>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua. Ut enim ad minim veniam.</p>
              <a href="#" class="btn">Find out more</a>
            </div>
          </div>
          <div class="w-full md:w-2/4 lg:w-1/4 px-3 mb-5">
            <div class="promo-img">
              <img src="images/slide.webp" class="block absolute top-0 left-0 w-full h-full object-cover object-center"
                alt="...">
            </div>
            <div class="prmo-content">
              <h4>Vodacom</h4>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua. Ut enim ad minim veniam.</p>
              <a href="#" class="btn">Find out more</a>
            </div>
          </div>
          <div class="w-full md:w-2/4 lg:w-1/4 px-3 mb-5">
            <div class="promo-img">
              <img src="images/slide.webp" class="block absolute top-0 left-0 w-full h-full object-cover object-center"
                alt="...">
            </div>
            <div class="prmo-content">
              <h4>Vodacom</h4>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua. Ut enim ad minim veniam.</p>
              <a href="#" class="btn">Find out more</a>
            </div>
          </div>
          <div class="w-full md:w-2/4 lg:w-1/4 px-3 mb-5">
            <div class="promo-img">
              <img src="images/slide.webp" class="block absolute top-0 left-0 w-full h-full object-cover object-center"
                alt="...">
            </div>
            <div class="prmo-content">
              <h4>Vodacom</h4>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et
                dolore magna aliqua. Ut enim ad minim veniam.</p>
              <a href="#" class="btn">Find out more</a>
            </div>
          </div>
        </div>
      </div>
    </div>






    <div class="centered-container">

      <h2 class="sec-heading text-center">Frequently Ask Questions</h2>
      {{#each c_relatedFAQs}}
      <div id="accordion-collapse" data-accordion="collapse" class="accordion-sec">
        <h2 id="accordion-collapse-heading-1-{{slug}}">
          <button type="button" class="accordion-btn" data-accordion-target="#{{slug}}" aria-expanded="false"
            aria-controls="accordion-collapse-body-1">
            <span>{{question}}</span>
            <svg data-accordion-icon class="w-6 h-6 rotate-0 shrink-0" fill="currentColor" viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                clip-rule="evenodd"></path>
            </svg>
          </button>
        </h2>
        <div id="{{slug}}" class="hidden mb-5" aria-labelledby="accordion-collapse-heading-1-{{slug}}">
          <div class="">
            {{convertRTFToHTML answer}}
          </div>
        </div>


      </div>
      {{/each}}

    </div>

    <!-- start -->
    <div data-slug={{slug}}
      data-name='{{name}} ,{{address.line1}},
                                        {{address.city}}, {{address.region}} {{address.postalCode}}, {{address.countryCode}},'
      data-lat={{yextDisplayCoordinate.latitude}} data-lng={{yextDisplayCoordinate.longitude}}
      class="list-group-item w-full px-5 divide-y-2 divide-gray-100  mb-2  border-solid border-gray-300">
    </div>

    <!-- end -->


    <div class="section nearby-store">
      <div class="centered-container">
        {{>nearby geocodedCoordinate}}
      </div>
    </div>
    <script src="faqs.js"></script>
  </div>
  </div>
  <div class="w-full">
    <div class="centered-container">
      {{>footer}}
    </div>
  </div>
  </div>
</body>

</html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZNQlSlEIkFAct5VzUtsP4dSbvOr2bE18&sensor=false&libraries=places"></script>

<script>
  function load_map(Mapping) {
    var self = this;
    function Initialize() {
      //var lat = {{yextDisplayCoordinate.latitude}};
      // var lng = {{yextDisplayCoordinate.longitude}};
      //$('.list-group-item').each(function() {
      // lat = $(this).data('lat');
      //lng = $(this).data('lng');
      // });
      // var myOptions = {
      // zoom: 15,
      // center: new google.maps.LatLng( lat, lng ),
      // mapTypeId: google.maps.MapTypeId.ROADMAP
      //};
      //self.map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
      self.markers = [];
      self.infoWindow = new google.maps.InfoWindow();




      $('.list-group-item').each(function () {
        var $this = $(this);
        var pos = new google.maps.LatLng($this.data('lat'), $this.data('lng'));
        var marker = new google.maps.Marker({
          position: pos,
          map: self.map,
          labelContent: "1",
        });


        self.markers.push(marker);
      });
    }
    Initialize();
  }
  (load_map)(window.Mapping = window.Mapping || {}, jQuery);
  function initializeAutocomplete() {
    var input = document.getElementById('search_key');
    new google.maps.places.Autocomplete(input, {
      componentRestrictions: { country: ["us"] },
      fields: ["street_number"],
      types: ["address"],
    });
  }

  function tConvert(time) {
    // Check correct time format and split into components
    time = time.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/) || [time];

    if (time.length > 1) { // If time format correct
      time = time.slice(1);  // Remove full string match value
      time[5] = +time[0] < 12 ? 'AM' : 'PM'; // Set AM/PM
      time[0] = +time[0] % 12 || 12; // Adjust hours
    }
    return time.join(''); // return adjusted time or original string
  }
  function offset1(offset){
    let newoffset=offset;
    getopentimeonmap(newoffset);
  }

  function getopentimeonmap(offset=204) {
    console.log(offset);
    var baseURL = "https://liveapi-sandbox.yext.com/v2/accounts/me/entities?";
    var api_key = "b262ae7768eec3bfa53bfca6d48e4000";
    var vparam = "20181017";
    var entityTypes = "location";
    var savedFilterId = "910935477";

    var fullURL =
      baseURL +
      "api_key=" +
      api_key +
      "&v=" +
      vparam +
      "&entityTypes=" +
      entityTypes +
      "&savedFilterId=" +
      savedFilterId +
      "&limit=" +
      50 +
      "&offset=" +
      offset;

    fetch(fullURL).then(response => response.json()).then(result => {


      if (!result.errors) {
        if (result.response.count > 0) {
         if(result.response.entities.find((entity) => entity.slug === '{{slug}}')){
          $.each(result.response.entities, function (index, entity) {
            const parsedOffset = parseTimeZoneUtcOffset(entity.timeZoneUtcOffset);
            if ("{{slug}}" == entity.slug) {
              //console.log(entity.name);
              $('.open-time').append('<strong>' + window.getOpenNowString(entity.hours, parsedOffset) + '</strong>');
              $('.open-time').append('<br><button class="seetime">see store hours</button><div class="store-time"></div>');
            }
            $(".seetime").on('click', function () {
                 var html = " ";
                  if ("{{slug}}" == entity.slug) {
                    if ($('.store-time').hasClass('active')) {
                      $('.store-time').removeClass("active");
                        $('.store-time').html('');
                 }else{
                $('.store-time').addClass("active");
               
              
                $.each(entity.hours, function (indexh, hour) {
                  console.log(hour);
                  // console.log(indexh);
                  html += '<div class="storelocation-openCloseTime">';
                  html += '<ul>';
                  html += '<li><strong>';
                  html += indexh.toString().slice(0, 3);
                  html += ' &nbsp</strong><strong> : </strong>&nbsp';

                  if (hour.openIntervals) {
                    $.each(hour.openIntervals, function (op, openInterval) {
                      // console.log(openInterval);
                      html += ' &nbsp' + openInterval.start + '&nbsp to &nbsp' + openInterval.end;
                    });
                  } else {
                    html += '&nbsp'+'Closed';
                  }

                  html += '</li>';
                  html += '</ul>';
                  html += '</div>';
                  html += "</div>";
                });

                    $('.store-time').append(html);

            }
          }
              })
          })
        }
        else{
          var offset=254;
          offset1(offset);
        }
        }
      }
    })
  }
  getopentimeonmap();
</script>
